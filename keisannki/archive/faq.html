<!doctype html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="author" content="山下陽介 (Yousuke Yamashita)  国立環境研究所 (National Institute for Environmental Studies, NIES)" />
<link rel="icon" type="image/vnd.microsoft.icon" href="/favicon.ico" />
<link rel="apple-touch-icon" type="image/png" href="/apple-touch-icon-180x180.png" />
<link rel="icon" type="image/png" href="/icon-192x192.png" />
<link rel="icon" type="image/x-icon" href="/favicon.ico" />
<!-- Mobile Internet Explorer allows us to activate ClearType technology for smoothing fonts for easy reading -->
<meta http-equiv="cleartype" content="on" />
<!-- Specify whether or not telephone numbers in the HTML content should appear as hypertext links -->
<meta name="format-detection" content="telephone=no" />
<!-- Changes the logical window size used when displaying a page mobile browsers -->
<meta name = "viewport" content = "width = device-width, initial-scale=1, user-scalable=yes" />

<meta name="robots" content="nofollow" />
<meta name="http-equiv" content="X-Robots-Tag : nofollow" />
<meta name="googlebot" content="nofollow" />
<meta name="description" content="Solaris 8, 9, Vine Linux, SuSE Linux, Tru64 UNIX 5.1bに関するFAQのページです">
<meta name="keywords" content="Solaris 8, 9, Vine Linux, SuSE Linux, Tru64 UNIX">
<link href="../design_keisannki.css" rel="stylesheet" type="text/css" />
<title>計算機FAQ</title>
</head>

<body>
<div id="nesting">
<a href="/">ホーム</a> &gt; <a href="/keisannki/index.html">計算機関連</a> &gt; アーカイブ：計算機FAQ
</div>
<article>
<h1 id="top">アーカイブ：計算機FAQ</h1>
<br />
<div id="text2">
<p>&nbsp; ここでは、計算機（Solaris, Tru64、Linux）の設定やプログラミング、作図等に関するFAQの<span style="COLOR:red">2013年以前の情報をアーカイブ</span>しています。<br />
&nbsp; 一般ユーザのコマンドプロンプトは%、rootのコマンドプロンプトは#で表記しています。</p>
</div>
<br />
<br />

<h2 id="contents">目次</h2>
<div class="contents">
  <ol class="list1">
    <!-- 1、初期設定 -->
    <li><a href="#init">初期設定</a>
    <ul class="list2">
      <li><a href="#1-1">Q1-1　Solarisでman コマンドを使うとmoreコマンドのような出力になります。lessコマンドのようにしたいのですが。</a></li>
      <li><a href="#1-2">Q1-2　Solarisを使っていますが、crontabを編集しようとすると見慣れない画面が出て終了もできません。どうしたらいいでしょうか？</a></li>
      <li><a href="#1-3">Q1-3　システムの設定とは違うデフォルトプリンタを使いたいのですがどうすればいいでしょうか？</a></li>
    </ul></li>
    <!-- 2、Fortran関連 -->
    <li><a href="#fortran">Fortran関連</a>
    <ul class="list2">
      <li><a href="#2-1">Q2-1　Tru64 UNIXのf77(f90)でコンパイルしたプログラムで作成したバイナリデータをgradsで見ると4レコードに1つしか図を作成できない。</a></li>
      <li><a href="#2-2">Q2-2　Solarisで問題なく使えたプログラムをTru64でコンパイルして実行するとread文の所でsequential-access I/O to unit open for direct accessというエラーが出て実行できない。</a></li>
      <li><a href="#2-3">Q2-3　自分のマシンのendianと違うendianのデータを扱いたいのですが、コンパイルオプションがあれば教えてください。</a></li>
      <li><a href="#2-4">Q2-4　ifort(バージョン8.1)をインストールしたがifort: error: could not find directory in which g++ residesとのエラーが出て使えない。</a></li>
      <li><a href="#2-5">Q2-5　ifort(バージョン11.0以降)でコンパイル時に relocation truncated to fit: R_X86_64_32S against `.bss というエラーが出た。</a></li>
      <li><a href="#2-6">Q2-6　netcdfライブラリを4.1.2や4.1.3に変えたら、リンクに失敗するようになった。</a></li>
    </ul></li>
    <!-- 3、ネットワーク関連 -->
    <li><a href="#network">ネットワーク関連</a>
    <ul class="list2">
      <li><a href="#3-1">Q3-1　環境変数でLANGの設定を行っているのにktermを使用すると文字化けが起こる。</a></li>
      <li><a href="#3-2">Q3-2　自分のPCからAstecXで接続し、そこから他のホストにloginしたがgradsのようなX関連のプログラムを実行できない。</a></li>
      <li><a href="#3-3">Q3-3　Solarisからftpをするとno route to host と表示されファイルを取得できない。</a></li>
      <li><a href="#3-4">Q3-4　パスワードを入力しないでssh login (scp) する方法はありますか。</a></li>
      <li><a href="#3-5">Q3-5　ls -l /netとしてもホスト名が表示されません。</a></li>
      <li><a href="#3-6">Q3-6　Linuxマシンから他のマシンにsshでloginし、emacsを使うと画面に触れた瞬間に終了する。</a></li>
      <li><a href="#3-7">Q3-7　OpenSUSE 12.1でsftpが使えなくなった。</a></li>
    </ul></li>
    <!-- 4、ファイル関連 -->
    <li><a href="#file">ファイル関連</a>
    <ul class="list2">
      <li><a href="#4-1">Q4-1　Windowsで作成したテキストファイルをUNIXに転送して表示すると行末に ^M が表示される。</a></li>
      <li><a href="#4-2">Q4-2　WindowsとUNIX間の転送で文字化けする。</a></li>
      <li><a href="#4-3">Q4-3　UNIX上でのtarやzipの扱い方を教えてください。</a></li>
      <li><a href="#4-4">Q4-4　viでEUCコードのファイルを開いた際に文字化けする。</a></li>
      <li><a href="#4-5">Q4-5　Windowsで使っているフラッシュメモリをLinuxマシンに接続すると、ファイルの大文字が小文字になる。</a></li>
      <li><a href="#4-6">Q4-6　Linuxマシンで受信したメールの添付ファイルが読めない。</a></li>
    </ul></li>
    <!-- 5、その他 -->
    <li><a href="#misc">その他</a>
    <ul class="list2">
      <li><a href="#5-1">Q5-1　manコマンドで見られないマニュアルがあります。何か良い方法はないでしょうか。</a></li>
      <li><a href="#5-2">Q5-2　LinuxのX画面のエラー音を消したい。</a></li>
      <li><a href="#5-3">Q5-3　OpenSUSE 12.1で日本語入力ができなくなった。</a></li>
    </ul></li>
  </ol>
</div>

<br /><br />
<small><a href="#top">[top]</a></small> <br />
<hr />
<br /><br /><br /><br />


<!-- １、初期設定  -->
<h3><div class="headline1" id="init">１、初期設定</div></h3>
<!-- 1-1 -->
<h4><div class="headline2" id="1-1">Q1-1　Solarisのman コマンドをlessコマンド表示にしたい</div></h4>
	<div class="text1">
		<p>Solarisでman コマンドを使うとmoreコマンドのような出力になります。lessコマンドのようにしたいのですが。</p><br />
		<p>A1-1　manコマンドを使用するとSolarisではデフォルトでmoreコマンドを使って表示するように設定されています。lessコマンドに変えるには環境変数PAGERを変更します。</p><br />
		<pre>% setenv PAGER less (csh,tcshの場合)<br />% export PAGER=less (bashの場合)</pre>
	</div>
	<br /><br />
	<br /><br />

<!-- 1-2 -->
<h4><div class="headline2" id="1-2">Q1-2　Solarisでcrontabの編集ができない</div></h4>
	<div class="text1">
		<p>Solarisを使っていますが、crontabを編集しようとすると見慣れない画面が出て終了もできません。どうしたらいいでしょうか？</p><br />
		<p>A1-2　システムの設定によってはデフォルトでcrontabなどの編集を行う際のエディタを指定する EDITOR 環境変数がedになっています。とりあえずqでedを終了します。<br />edを使える人はほとんどいないと思いますのでviやemacsで編集できるようにします。</p><br />
		<pre>% setenv EDITOR vi (csh,tcshの場合)<br />% export EDITOR=vi (bashの場合)</pre>
		<br />
		* edの基本的な操作について(viの最終行モードに似ています)<br />
		p ; 表示 (ex. 1,5p ; 1行目から5行目を表示、10,$p ; 10行目から最後まで表示) <br />
		1 ; 1行目にカーソルを移動し表示 <br />
		$ ; 最終行にカーソルを移動し表示 <br />
		. ; カーソルが現在置かれている行を表示 <br />
		5i ; 5行目の前に挿入 (.で挿入モードから抜ける) <br />
		.a ; 現在の行にテキストを追加 <br />
		4,5d ; 4,5行目を削除 <br />
		s/パターン1/パターン2/  ; 行の最初にあるパターン1をパターン2に置換 <br />
		s/パターン1/パターン2/g ; パターン1をパターン2に全て置換 <br />
		1,5s/パターン1/パターン2/g ; 1-5行目のパターン1を全てパターン2に置換 <br />
		w ; 変更をファイルに書き込む <br />
		q ; 終了(ファイルには書き込まない) <br />
	</div>
	<br /><br />
	<br /><br />

<!-- 1-3 -->
<h4><div class="headline2" id="1-3">Q1-3　システムの設定とは違うデフォルトプリンタを使いたいのですがどうすればいいでしょうか？</div></h4>
	<div class="text1">
		<p>A1-3  デフォルトプリンターは環境変数PRINTERで指定することができます。</p><br /><br />
		<pre>% setenv PRINTER プリンタ名(csh, tcshの場合)<br />% export PRINTER=プリンタ名(bashの場合)</pre>
		のようにして下さい。
	</div>
	<br /><br />
	<br /><br />

	<a href="#contents">目次</a> 
	<hr /><br />


<!-- 2、Fortran関連  -->
<h3><div class="headline1" id="fortran">２、Fortran関連</div></h3>
<!-- 2-1 -->
<h4><div class="headline2" id="2-1">Q2-1　Tru64 UNIXとSolarisでgradsの時刻表示が異なる</div></h4>
	<p>Tru64 UNIX のf77(f90)でコンパイルしたプログラムで作成したバイナリデータをgradsで見ると4レコードに1つしか図を作成できません。Solarisではうまくいくのですが。</p><br />
	<div class="text1">
		<p>A2-1　Tru64 UNIXのFortran CompilerはデフォルトでRECLの単位を4byteとみなすように設定されています。Solarisのf77やgnuのg77など他のコンパイラではRECLの単位は1byteですのでそれに合わせたプログラムを使うと、データの書き出しの際にレコード長が書き出したい配列の4倍になり、レコードの最初の1/4のみにしかデータが書き込まれないことになります。<br />　これを防ぐための方法としてRECLの単位を4byteとしてプログラムを書き換えることも可能ですが、プログラムを書き換えることなく利用したい場合には-assume byterecl というオプションが使えます。このオプションによりRECLの単位を1byteに変えることができます。例えば<br />
		<pre>% f77 -assume byterecl ファイル名</pre>
		のように使用します。big endianを扱いたいときには<br />
		<pre>% f77 -assume byterecl -convert big_endian ファイル名</pre>
		となります。</p>
	</div>
	<br /><br />
	<br /><br />

<!-- 2-2 -->
<h4><div class="headline2" id="2-2">Q2-2　Solarisで問題なく使えたプログラムをTru64でコンパイルして実行した場合のエラー</div></h4>
	<p>Solarisで問題なく使えたプログラムをTru64でコンパイルして実行するとread文の所で<br /><span style="COLOR:red">sequential-access I/O to unit open for direct access</span><br />というエラーが出て実行できない。</p><br />
	<div class="text1">
		<p>A2-2　Tru64 UNIXのコンパイラでは</p>
		<pre>real A(100)<br />open(10, form='unformatted', access='direct', recl=100)<br />read(10) A</pre><br /><br />
		のようなプログラムがあった場合、Aをdirect accessではなくsequential accessで読み込もうとします。Solarisやgnuのコンパイラではopen文で指定されていればdirect accessで読み込んでくれるのでこのような問題が起きたのだと思われます。解決策としては<br />
		<pre>read(10) A </pre>
		の部分を<br />
		<pre>read(10,rec=1) A </pre>
		のように書き換えればdirect accessとして認識してくれるため問題なく実行できるかと思います。<br />
	</div>
	<br /><br />
	<br /><br />

<!-- 2-3 -->
<h4><div class="headline2" id="2-3">Q2-3　自分のマシンのendianと違うendianのデータを扱いたい</div></h4>
	<p>自分のマシンのendianと違うendianのデータを扱いたいのですが、コンパイルオプションがあれば教えてください。</p><br />
	<div class="text1"><p>A2-3 下にOSとCPU、コンパイラと対応するオプションについて挙げておきますので参考にして下さい。<br />intel(Pentium, Celeron, Core 2 Duo, Core i7/i5/i3, Itenum, Xeon)、AMD(Athlon, Opteron)、DEC(alpha)などはlittle endian、Sun(Sun Ultra SPARC)、昔のMacのPowerPC、SR11000、SX6、SX8などのスパコンのCPUはbig endianです。</p><br />
		<table border="1">
			<tbody>
				<tr><td>OS</td><td>CPU</td><td>endian</td><td>コンパイラ</td><td>オプション</td></tr>
				<tr> <td>Tru64</td><td>alpha</td><td>little</td><td>f77,f90,f95</td><td>-assume byterecl <br /> -convert big_endian</td></tr>
				<tr><td>Linux</td><td>Opteron<br />Pentium<br />Core2 Duo<br />Core i7<br />Xeon等</td><td>little</td><td>pgf77<br />pgf90</td><td>-byteswapio</td></tr>
				<tr><td></td><td></td><td></td><td>ifort(ifc)</td><td>-assume byterecl<br />-convert big_endian</td></tr>
				<tr><td></td><td></td><td></td><td>g95</td><td> -fendian=big</td></tr>
				<tr><td></td><td></td><td></td><td>gfortran</td><td> -fconvert=big-endian</td>
				</tr>
			</tbody>
		</table>
		<br /><br />
		<p>* g77にはendianを変換するオプションはありません。</p>
		<p>* Solarisのf77, f90にはendianを変換するオプションはありません。</p>
		<p>* GCMの出力の場合、little endianのマシンで計算しても、出力はbig endianになるようにプログラムされています。</p>
		<p>* GCMで出力されたデータのendianを変換したい場合には、GTOOLのgtwdir -r4r を使うことができます。詳細はマニュアルや<a href="./gtool.pdf" title="gtool(gtool3)の使用法">GTOOLの使用法</a>をご参照下さい。</p>
	</div>
	<br /><br />
	<br /><br /> 

<!-- 2-4 -->
<h4><div class="headline2" id="2-4">Q2-4　ifortバージョン8.1のコンパイルエラー</div></h4>
	<p>ifort（バージョン8.1）をインストールしたがコンパイルしようとすると<br /><font color="red">ifort: error: could not find directory in which g++ resides</font><br />とのエラーが出て使えない。</p><br />
	<div class="text1">
		<p>Q2-4　環境変数GXX_ROOTを設定することで正常にコンパイルできるようになります。</p><br /><br />
		<pre>% gcc --print-search-dirs </pre>
		でインストールされたディレクトリを探し、<br />
		<pre>% export GXX_ROOT=/usr/lib/gcc-lib/i386-vine-linux/3.3.2/ (bash)<br />% setenv GXX_ROOT /usr/lib/gcc-lib/i386-vine-linux/3.3.2/ (tcsh)</pre>
		のように環境変数を設定します。
	</div>
	<br /><br />
	<br /><br />

<!-- 2-5 -->
<h4><div class="headline2" id="2-5">Q2-5　ifortバージョン11.0以降のコンパイルエラー</div></h4>
	<p>ifort（バージョン11.0以降）でコンパイル時に<br />
		<span style="COLOR:red">relocation truncated to fit: R_X86_64_32S against `.bss</span><br />というエラーが出た</p><br />
	<div class="text1">
		<p>Q2-5　ifort 11.0以降ではコンパイル時にプログラムが確保するメモリの大きさをチェックするらしく、巨大な配列を使っているなど、ある程度以上のメモリ領域（正確な閾値は不明）を確保しようするとエラーになってしまいます。この場合には、ifortに<br />
		<pre>-shared-intel -mcmodel=large</pre>
		のオプションを付けてコンパイルすることでエラーを回避可能です。</p>
	</div>
	<br /><br />
	<br /><br />

<!-- 2-6 -->
<h4><div class="headline2" id="2-6">Q2-6　netcdfライブラリ4.1のリンクエラー</div></h4>
	<p>netcdfライブラリを4.1.2や4.1.3に変えたら、リンクに失敗するようになった。<br />というエラーが出た</p><br />
	<div class="text1">
		<p>Q2-6　netcdf-4.1.2以降では、FortranライブラリがCライブラリから分離されました。これに伴い、Fortranライブラリの名前がlibnetcdf.aではなく、libnetcdff.aとなりました。<br />4.1.1以前のバージョンでは、コンパイル時に</p>
		<pre>コンパイラ名　-c aaa.f90 -I${NETCDF}/include<br />コンパイラ名　-c bbb.f90 -I${NETCDF}/include</pre>(${NETCDF}は、netcdfライブラリをインストールしたディレクトリ)<br />
		リンク時に、
		<pre>コンパイラ名　bbb.o aaa.o -L${NETCDF}/lib64 -lnetcdf</pre> 
		または、
		<pre>コンパイラ名　bbb.o aaa.o ${NETCDF}/lib64/libnetcdf.a</pre>
		のようにしていたかと思います。<br />
		<br />
		4.1.2以降のバージョンをリンクする場合には、netcdfの部分をnetcdffとして
		<pre>コンパイラ名　bbb.o aaa.o -L${NETCDF}/lib64 -lnetcdff</pre> 
		または、
		<pre>コンパイラ名　bbb.o aaa.o ${NETCDF}/lib64/libnetcdff.a</pre>のようにリンクを行ってください。<br />
	</div>
	<br /><br />
	<br /><br />

	<br />
	<a href="#contents">目次</a>
	<hr /><br />


<!-- 3、ネットワーク関連  -->
<h3><div class="headline1" id="network">３、ネットワーク関連</div></h3>
<!-- 3-1 -->
<h4><div class="headline2" id="3-1">Q3-1　環境変数でLANGの設定を行っているのにktermを使用すると文字化けが起こる。</div></h4>
<div class="text1">
	<p>A3-1　環境変数はshellとプログラムの中で参照されるため、多くのアプリケーションではLANGの設定を行えば文字コードの問題を解決できます。ただktermとemacsは、これとは別の方法で文字コードの設定を行っています。ktermの場合、-km オプションで設定を行います。文字コードがeucの場合、次のように起動します。</p>
	<pre>% kterm -km euc &amp;</pre>
	<p>Shift-JISなら</p>
	<pre>% kterm -km sjis &amp;</pre>
	のようになります。これをaliasに設定すると便利だと思います。<br /><br />
	<p>＊ xtermの場合、端末自体が日本語に対応していないので(日本語用にコンパイルされたxtermを除く) -km オプションを指定しても日本語表示ができません。</p>
	<p>＊ ktermの文字コードを変更してからファイルを開いても文字化けする場合、開いたファイルの文字コードがktermの文字コードと一致しているか確認して下さい。異なっている場合には</p>
	<pre>% nkf -e &lt; ファイル名 &gt; 新しいファイル名 </pre>
	<p>でeucに変換します。</p><br />
	<p>＊ Windows 端末からXDMCPで接続している場合、端末のアプリケーションの側に日本語フォントがなければ文字化けするか、文字の代わりに四角形が表示されます。フォントサーバを利用するか、アプリケーションに日本語フォントをインストールして下さい。</p>
</div>
<br /><br />
<br /><br />

<!-- 3-2 -->
<h4><div class="headline2" id="3-2">Q3-2　AstecXでgradsのようなX関連のプログラムを実行できない</div></h4>
<div class="text1">
	<p>自分のPCからAstecXでhostAに接続し、hostAからhostBにloginしたがgradsのようなX関連のプログラムを実行できない。</p><br />
	<p>A3-2　自分の端末でXサーバ(AstecX、Cygwin-X等)を起動して、あるホストにXDMCPで接続し、そこから別のホストにsshなどで接続してX関連のプログラムを実行するには次の２つの操作を行う必要があります。自分の端末からssh -Xで接続する場合にはこの操作は必要ありません。</p><br />
	<ul class="list1">
		<li>リモートホストに接続する前に必要な操作(xhostの実行)<br />
			(この質問の場合はhostAがローカルホスト、hostBがリモートホスト)<br />
			&nbsp; xhostはコマンドが実行されたホストからコマンドで指定されたホストまでのXを使った接続を許可(or 許可の取消)するためのコマンドです。<br />
			<pre>% xhost +hostB (Xを使ったhostBへの接続を許可)</pre>
		</li><br />
		<li>リモートホストに接続した後に必要となる操作(環境変数DISPLAYの設定)<br />
			&nbsp; 環境変数DISPLAYは実行されたプログラム(Xクライアント)からのリクエストをどのXサーバに出すかという情報を保持します。自分の端末でXサーバが動いていて自分の端末上のプログラム(Xクライアント)からのリクエストを受ける場合には localhost:0.0 (Xクライアントが実行されたホストと同一のホストのXサーバ)となります。<br />
			&nbsp; 今回の場合には自分の端末ではXサーバが動いていて、それを使ってhostAに接続しhostAからhostBに接続したことを想定しているので、XクライアントはhostBで実行されるプログラムとなり、Xサーバは自分の端末のXサーバとなり、環境変数DISPLAYは 自分の端末のIP:0.0 となります。<br />
			&nbsp; 環境変数DISPLAYは.cshrcや.bashrcの中で設定していれば問題ありませんが、設定を行わなかった場合、Xクライアントは localhost:0.0 (この場合にはhostBにloginしているのでhostBのディスプレイ)のXサーバにリクエストを出そうとするので、自分の端末のXサーバにリクエストが行くようにするには<br />
			<pre>% setenv DISPLAY <i>192.168.0.22(自分の端末のIPに変える)</i> :0.0  (csh、tcshの場合)<br /> % export DISPLAY=`<i>192.168.0.22(自分の端末のIPに変える)</i> :0.0`  (bashの場合)</pre>
			のように設定します。IPアドレスと:の間にスペースは入らないので注意してください。使用する端末のIPが常に変わらない場合には.cshrcや.bashrcの中で設定した方が便利だと思います。<br />
			<br />
			＊ Reflection X、X Win32の場合、XDMCPによる接続は行いません。<br /><br />
			＊ ssh -Xあるいはssh -o "ForwardX11 yes" を使用する場合、転送されたX11をループバックアドレス(localhost)にbindし、環境変数 DISPLAY を localhost:10.0 のように自動的に書き換えます。この際には localhost:10.0 に出されたXクライアントのリクエストはsshを通してXサーバに届きますのでDISPLAYの設定を変更する必要はありません(手動で変更してしまうとXが飛ばなくなるので注意)。<br /><br />
			＊ hostAとhostBの間にファイアウォールがある場合、通常はX11プロトコル(ポート6000番)をブロックするように設定していると思います。この際にはsshのX11転送を使って下さい。<br /><br />
			＊ sshの接続の際、クライアント側で常にX11転送を有効にしておくと便利です。sshクライアントの設定ファイルは、Linuxでは/etc/ssh/ssh_config、Solarisのopensshでは/usr/local/etc/ssh_configです。その中でForwardX11 yesの行を有効にしてください。emacsが落ちる場合は、ForwardX11Trusted yesも有効にします。<br /></li>
	</ul>
	<br /><br />
	<p><a name="ip">＊ 端末のIPの調べ方</a><br />Windowsの場合、[プログラム]-[アクセサリ]-[コマンドプロンプト]でコマンド入力ができるようにしてから</p>
	<pre>% ipconfig </pre>
	<p>として調べます。Cygwinの場合にも同じコマンドが使えます。<br /><br />Linuxの場合には</p>
	<pre>% /sbin/ifconfig</pre>
	<p>で調べることができます。</p><br />
	<p>＊ ディスプレイ番号とスクリーン番号<br />
	&nbsp; 環境変数DISPLAYでIPアドレスの後ろの 0.0 はディスプレイ番号とスクリーン番号を表します。ディスプレイ番号は１つの端末に接続された物理的なディスプレイのことで0から始まる整数を使用します。通常の使用(１つの端末で1つのディスプレイと１つのスクリーンを使用)では 0 で問題ありません。1つのディスプレイとは、1つのグラフィックカードに接続されたモニタやマウスなどの集合と考えて下さい。1つのディスプレイが複数のスクリーンを持つ場合には(例えば CygwinのXサーバをスクリーン番号を変えて複数起動する場合)、複数のスクリーンでキーボードとマウス(などのポインタ)を共有した状態となります。この場合にはスクリーン番号の指定が必要となります。スクリーン番号もディスプレイ番号同様0から始まる整数を使用しますが、通常の使用では 0 となります。スクリーン番号を指定しない場合には 0 に設定されるので通常の使用では省略することも可能です。<br />
	&nbsp; ちなみに、ディスプレイ番号0はtcp/6000に、ディスプレイ番号1はtcp/6001を使用します。ssh接続でX11転送を有効にした場合、Xクライアントが実行されるホストの環境変数DISPLAYが例えばlocalhost:10.0に設定されますが、この時、tcp/6010が使用されることになります。この際にはXクライアントが実行されるホストのtcp/6010に送られたXクライアントの出力をssh接続を通してXサーバが起動しているホストのtcp/6000に転送するので、Xサーバが起動しているホストで表示できるということになるわけです。</p>
</div>
<br /><br />
<br /><br />

<!-- 3-3 -->
<h4><div class="headline2" id="3-3">Q3-3　Solarisからftpをした際のエラー</div></h4>
	<div class="text1">
		<p>Solarisからftpをするとanonymous login はできたがデータを取得しようとすると<br /><span style="COLOR:red">425 Unable to build data connection: No route to host</span><br />と表示されファイルを取得できない。</p><br />
		<p>A3-3 ftpコマンドでpassive modeを試してみて下さい。</p>
		<pre>ftp&gt; passive </pre>
		<p>とすれば、passive mode になります。</p><br />
		<p>＊ ftpコマンドの中にはデフォルトでactive mode になっているものがあります。 active modeでは、接続元のポート20を開けるように要求されます。ファイアウォールを導入しているシステムでは、接続元のポートを開けることを許可していない場合があります。passive modeでは接続先の指定した別のポートに接続し、そのポートを使ってデータを転送するのでこの方法で解決できるかと思います。</p>
</div>
<br /><br />
<br /><br />

<!-- 3-4 -->
<h4><div class="headline2" id="3-4">Q3-4　パスワードを入力しないでssh login (scp) する方法はありますか</div></h4>
<div class="text1">
	<p>A3-4 sshではパスワード認証のほかに公開鍵による認証も可能です。リモートホスト、ローカルホストで鍵のペアを作成すればパスワードなしで login できるようになります。<br />
		鍵の生成方法は<a href="https://qiita.com/kazokmr/items/754169cfa996b24fcbf5" rel="nofollow">Qiita</a>を参考にして下さい。</p>
</div>
<br /><br />
<br /><br />

<!-- 3-5 -->
<h4><div class="headline2" id="3-5">Q3-5　ls -l /netとしてもホスト名が表示されません</div></h4>
<div class="text1">
	<p>A3-5　Linux、Solaris、Tru64 で自動マウントの設定をした場合、特別な設定をしない限り /net/ホスト名/ファイルシステム のようにマウントポイントが作成されます。暫くの間、誰もアクセスしないと自動的にアンマウントされますが、この際にマウントポイントも消えるようになっています。</p>
	<p>% ls /net/ホスト名<br />とすれば再び表示されるようになります。</p>
</div>
<br /><br />
<br /><br />

<!-- 3-6 -->
<h4><div class="headline2" id="3-6">Q3-6　sshでloginしてemacsを使う際のエラー</div></h4>
<div class="text1">
	<p>Linuxマシンから他のマシンにsshでloginし、emacsを使うと画面に触れた瞬間に<br /><span style="COLOR:red">X protocol error: BadWindow (invalid Window parameter) on protocol request 38</span><br />のようなエラーが出て終了する。</p><br />
	<p>A3-6　emacsはsshに対してX11クッキーを要求します。X11クッキーはデフォルトの設定では信頼されていないため、エラーを出し終了しているものと思われます。</p><br />
	<p>/etc/ssh/ssh_configに</p>
	<pre>ForwardX11Trusted yes</pre>
	<p>を追加して下さい。</p><br />
	<p>＊ サーバ側がopenssh-5.0以降では、ssh接続でXを使う際には必ずForwardX11Trusted yesの設定が必要になります。</p>
</div>
<br /><br />
<br /><br />

<!-- 3-7 -->
<h4><div class="headline2" id="3-7">Q3-7　OpenSUSE 12.1でsftpが使えなくなった</div></h4>
<div class="text1">
	<p>A3-7　OpenSUSE 12.1にアップグレードした際、/etc/ssh/sshd_configが</p>
	<pre>Subsystem       sftp    /usr/<font color="red">lib64</font>/ssh/sftp-server</pre>
	<p>となる場合があります。その場所にsftp-serverの実行ファイルが存在しないため、sshdが立ち上がっていてsshで接続できてもsftpによるファイル転送が使用不可になってしまいます。<br />対処方法としては、/usr/lib/ssh/sftp-serverに64 bit対応のsftpがあるので、この行を</p>
	<pre>Subsystem       sftp    /usr/<span style="COLOR:red">lib</span>/ssh/sftp-server</pre>
	<p>のように書き換えればsftpが使用可能です。</p><br />
	<p>＊ 12.1を新規インストールした場合には、この症状は起きなかった。</p>
	<p>＊ sftp-serverが64 bit対応なのに、/usr/lib64/ssh/以下になく32 bit用の/usr/lib/ssh/以下にあるのも、アップグレード時に存在しないパスに設定されてしまうのも謎。バグだろうか？</p>
</div>
<br /><br />
<br /><br />

<br />
<a href="#contents">目次</a> 
<hr /><br />


<!-- ４、ファイル関連  -->
<h3><div class="headline1" id="file">４、ファイル関連</div></h3>
<!-- 4-1 -->
<h4><div class="headline2" id="4-1">Q4-1 Windowsで作成したテキストファイルをUNIXに転送して表示すると行末に ^M が表示される</div></h4>
<div class="text1">
	<p>A4-1　Windowsでは改行コードにCR(キャレッジリターン, 文字コード015)とLF(ラインフィード, 012)を使用していますが、UNIXではLFのみを使っています。このため、 Windowsで作成したテキストファイルをUNIX上で見ようとすると、プログラムによってはCRが^Mとして表示されることがあります。</p>
	<p>^Mを取り除くには、</p>
	<pre>% cat 入力ファイル | tr -d '\015' &gt;! 出力ファイル </pre>
	<p>とします。trコマンドは標準入力からテキスト形式の文字列を受け取ると -d オプションで指定されたキーワード(この場合は文字コード \015)を取り除いて標準出力に出力します。</p><br />
	<p>＊ Windowsのファイルは、改行コードだけでなく文字コードもUNIXと異なります。Windowsで作成したファイルをUNIXに転送して文字化けする場合には、文字コードの変換と改行コードの変換を行うnkfを使います。（nkfに関しては<a href="#4-2">4-2</a>参照）</p>
</div>
<br /><br />
<br /><br />

<!-- 4-2 -->
<h4><div class="headline2" id="4-2">Q4-2　WindowsとUNIX間の転送で文字化けする</div></h4>
<div class="text1">
	<p>A4-2　Windowsは文字コードにShift-JIS、UNIXでは文字コードにEUCかUTF-8を用いています。文字コードは文字に振られた番号のようなもので、たとえばShift-JISとEUCでは番号と文字の対応が異なるので、Shift-JISをEUCと思って表示しようとすると文字化けしてしまいます。また<a href="#4-1">4-1</a>に記述したように、WindowsとUNIXは改行コードも異なります。<br />&nbsp; WindowsからUNIXに転送したファイル対し、nfkコマンドを用いて次のように文字コード、改行コードを変換します。</p>
	<pre>% cat 入力ファイル | nkf -e -Lu &gt;! 出力ファイル</pre>
	<br />
	<p>＊ nkfは標準入力から受け取った文字列を解析してどの文字コード、改行コードで記述されているかを判別し、コマンドで指定された(例えば、-e : EUC、-s : Shift-JIS、-j : 7bit jis、-w : UTF-8)文字コード、改行コード(-Lu : LF、-Lw : CR + LF、-Lm : CR)に変換するコマンドです。</p>
	<pre>% cat 入力ファイル | nkf  --unix &gt;! 出力ファイル</pre>
	<p>でも同様の変換が可能です。</p><br />
	<p>&nbsp; 逆に、unixからwindowsに転送したい場合には</p>
	<pre>% cat 入力ファイル | nkf  --windows &gt;! 出力ファイル</pre>
	<p>macに転送したい場合には</p>
	<pre>% cat 入力ファイル | nkf  --mac &gt;! 出力ファイル</pre>
	<p>で変換可能です。</p><br />
	<p>＊ 最近のLinuxでは、UTF-8が標準の文字コードとなりつつあります。UTF-8のマシンでは、</p>
	<pre>% cat 入力ファイル | nkf -w -Lu &gt;! 出力ファイル</pre>
	<p>で文字コードUTF-8、改行コードLFに変換します。</p>
</div>
<br /><br />
<br /><br />

<!-- 4-3 -->
<h4><div class="headline2" id="4-3">Q4-3　UNIX上でのtarやzipの扱い方を教えてください</div></h4>
<div class="text1">
	<p>A4-3　tar形式のファイルをUNIX上で解凍するには、</p>
	<pre>% tar xvf ファイル名</pre>
	<p>と打ちます。</p>
	<p>tarを作成するには</p>
	<pre>% tar cvf 作成するファイル名 tarに入れたいファイルやディレクトリ</pre>
	<p>とします。</p><br />
	<p>＊ gnuのtarコマンドであれば、gzipやbunzip2のフィルターに対応しているので、</p>
	<pre>% tar xzvf hoge.tar.gz <br />% tar xjvf hoge.tar.bz2 </pre>
	<p>でgzipやbunzip2で圧縮されたtarファイルを直接解凍可能です。</p><br />
	<p>圧縮の場合も</p>
	<pre>% tar czvf hogehoge.tar.gz  tarに入れたいファイルやディレクトリ <br />% tar cjvf hogehoge.tar.bz2 tarに入れたいファイルやディレクトリ </pre>
	<p>で作成可能です。</p><br />
	<p>&nbsp; zip形式のファイルを扱うには、zipとunzipコマンドがあります。zipを解凍するには、</p>
	<pre>% unzip hoge.zip </pre><br />
	<p>&nbsp; zipで圧縮するには、</p>
	<pre>% zip -r hogehoge.zip zipに入れたいファイルやディレクトリ</pre><p>です。</p><br /><br />
	<p>* ちなみに、Vine-5.xではlha形式にも対応しており、</p>
	<pre># apt-get insall lha</pre>
	<p>でlhaをダウンロード可能。</p>
	<p>使用法は</p>
	<pre>lha a 圧縮先　圧縮元<br />lha e 解凍元</pre>
</div>
<br /><br />
<br /><br />

<!-- 4-4 -->
<h4><div class="headline2" id="4-4">Q4-4　viでEUCコードのファイルを開いた際に文字化けする</div></h4>
<div class="text1">
A4-4　原因はいくつか考えられますが、viが文字コードの自動認識に失敗しているだけなら簡単に対処可能です。まずはviでファイルを開いた後、コマンドモード(最終行モード)で<br />
<pre>
:e ++enc=euc-jp</pre>
を試してみて下さい。<br /><br />
これでも文字化けするようでしたら、端末の文字コードが原因である可能性も考えられます。Linuxの端末では文字コードの選択ができるものがありますので、 EUCになっているか確かめてみてください。Solarisなどのktermではkterm -km eucで起動すればEUCになります(環境変数をEUCにしても端末の文字コードは変わらないので注意)。なおSolarisのxtermは日本語未対応です。
<br />
<br />
＊ ファイルが実はEUCではなかったという可能性もあります。その場合、<br />
<pre>
% nkf -e &lt; ファイル名 &gt; 出力ファイル名 </pre>
でEUCに変換してください。<br />
<br />
＊ EUCで書き出したい場合、コマンドモードで<br />
<pre>
:set fileencoding=euc-jp</pre>
とします。
</div>
<br /><br />
<br /><br />

<!-- 4-5 -->
<h4><div class="headline2" id="4-5">Q4-5　WindowsからLinuxにフラッシュメモリを渡すと、大文字が小文字になる</div></h4>
<p>Windowsで使っているフラッシュメモリをLinuxマシンに接続すると、ファイルの大文字が小文字になる</p><br />
<div class="text1">
A4-5　Windowsで使用しているフラッシュメモリは、たぶんFAT32(Linuxのファイルシステムタイプではvfat)でフォーマットされていると思います。Linuxでvfatをマウントする際のデフォルトのオプションはlowerとなっていて、このオプションでは大文字で始まっているファイル名が小文字で表示されてしまいます。そのままのファイル名で表示するようにするには、mixedのオプションを使います。具体的には、<br />
<pre>
# mount -t vfat -o shortname=mixed デバイス名 マウント先のディレクトリ名</pre>
でマウントします。
</div>
<br /><br />
<br /><br />

<!-- 4-6 -->
<h4><div class="headline2" id="4-6">Q4-6　Linuxマシンで受信したメールの添付ファイルが読めない</div></h4>
<div class="text1">
A4-6　添付ファイルが読めないケースの代表的なものとして、winmail.datが添付されていた場合と、メールと添付ファイルが一体化している場合の対処方法について記載します。<br />
<br />
<li>winmail.datが添付されている場合</li><br />
&nbsp; WindowsのOutlookから送信されるメールには、winmail.datというファイルが添付されることがあります。中に何も入っていないファイルのこともあるのですが、Outlookで添付ファイルを付けた場合には、添付ファイルもwinmail.datに含まれてしまいます。この場合には、<a href="http://sourceforge.net/projects/tnef/">tnef</a>というソフトウェアを使ってファイルを取り出すことで対処可能です。<br />
&nbsp; tnefをダウンロードし、<br />
<pre>
------------------------------
% ./confugure
% make
# make install
------------------------------</pre>
で/usr/local以下にインストールされます。<br />
<br />
root権限のないマシンで使用する場合には、<br />
<pre>
------------------------------
% ./confugure --prefix=インストールしたい場所
% make
% make install
------------------------------</pre>
で自分のホームディレクトリなど、書き込み可能な場所にインストールしてください。（勝手にソフトウェアをインストールしてもいいか分からない場合は、システムの管理者に確認するようにしてください。）<br />
<br />
tnefの使用法:<br />
<pre>
% tnef -tv winmail.dat （ファイル名リストを閲覧する場合）<br />
% tnef winmail.dat （アーカイブされたファイルを取り出す場合）</pre>
<br />
<br />
<li>メールと添付ファイルが一体化している場合 </li><br />
&nbsp; メールソフトが自動で添付部分を取り出せず、メール本文の後に添付ファイルがそのままくっついて一体化しているケースもあります。この場合、メール全体を一旦テキストファイルとして保存し、テキストエディタで<br />
<pre>
------------------------------
begin 666  ファイル名
記号の羅列
end
------------------------------</pre>
までの添付部分を切り出し保存します。<br />
&nbsp; 次にuudecodeを使って、切り出したテキストファイルを復号化します。<br />
<pre>
% uudecode 切り出したテキストファイル名</pre>
です。
</div>
<br /><br />
<br /><br />

<br />
<a href="#contents">目次</a> 
<hr /><br />


<!-- 5、その他  -->
<h3><div class="headline1" id="misc">5、その他</div></h3>
<!-- 5-1 -->
<h4><div class="headline2" id="5-1">Q5-1　manコマンドで表示できないことがある</div></h4>
<p>manコマンドでマニュアルを表示しようとすると、<br /><span style="COLOR:red">/tmp/mpSgayTq may be a binary file.  See it anyway?</span><br />のようなエラーが出てマニュアルを見られません。何か良い方法はないでしょうか。</p><br />
<div class="text1">
A5-1　manコマンドはテキストと同時にコントロールシーケンスも出力しますが、pagerがそれに対応していなければうまく表示できません。<br />
<pre>
% man マニュアル名 | col -b &gt; file名</pre>
としてファイルに出力してから読んで下さい。<br />
<br />
＊ col -b を使うとコントロールシーケンスのみを取り除くことができ、通常のテキストとして表示することが可能になります。<br />
<br />
＊ 表示したマニュアル中に良く分からない記号が出てくる場合にも同じ方法を利用してテキストに変換することが可能です。上記の方法を試してみて下さい。
</div>
<br /><br />
<br /><br />

<!-- 5-2 -->
<h4><div class="headline2" id="5-2">Q5-2　LinuxのX画面のエラー音を消したい</div></h4>
<div class="text1">
A5-2　X画面が起動した状態でターミナルを開き、<br />
<pre>
% xset b off</pre>
とすればエラー音を消すことができます。
</div>
<br /><br />
<br /><br />

<!-- 5-3 -->
<h4><div class="headline2" id="5-3">Q5-3　OpenSUSE 12.1で日本語入力ができなくなった</div></h4>
<div class="text1">
A5-3　OpenSUSE 12.1をインストール後、そのままではShift+Spaceで日本語入力メソッドが立ち上がりません。<br />
12.1でデフォルトのインプットメソッドがibusになり、Ctrl+Spaceで立ち上げるように変更になったのが原因のようです。ibus+anthyを使う場合には、画面下のibusアイコンから設定を選びインプットメソッドanthyを選択します。<br />
11.4同様Shift+Spaceで入力するには、キーの設定も必要です。<br />
<br />
＊ 11.4と同じようにscim+anthyを使用して日本語入力したい場合<br />
(1) yast2でscim、anthy、scim-anthy、scim-bridgeのバイナリがインストールされていることを確認します。<br />
(2) ${HOME}/.kde4/Autostart/scimを作成し、次のように記述<br />
<pre>
-----------------------------------------------------------------
#!/bin/sh
scim -d &
-----------------------------------------------------------------</pre>
% chmod +x ${HOME}/.kde4/Autostart/scim<br />
<br />
(3) .profileの最後に<br />
<pre>
-----------------------------------------------------------------
export XMODIFIERS=@im=SCIM
export QT_IM_MODULE=scim-bridge
export GTK_IM_MODULE=scim-bridge
export QT_IM_SWITCHER=imsw-multi
-----------------------------------------------------------------</pre>
を追記します(bashの場合)。<br />
(4) ログインし直せばShift+Spaceでscimが立ち上がります。<br />
ibusのアイコンが残っていれば、起動しないように設定しても問題ないと思います。(.profileの設定でインプットメソッドがscimに変更されたので、必要ないプロセスが動いている以上の悪影響はありませんが。)<br />
</div>
<br /><br />
<br /><br />

<br />
<a href="#contents">目次</a> 
<hr /><br />


<br /><br />
<small><a href="#top">[top]</a></small> <br />
<hr />
</article>
</body>
<footer>
<p>最終更新日：2025/08/01</p>
<p>Copyright (C) 2005-2025, Yousuke Yamashita</p>
</footer>
</html>

